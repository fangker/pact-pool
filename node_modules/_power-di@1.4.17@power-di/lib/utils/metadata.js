"use strict";

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.metaSymbol = Symbol('power-di-metadata');

var MetadataType = function MetadataType() {
  _classCallCheck(this, MetadataType);

  this.injects = [];
};

exports.MetadataType = MetadataType;

function getMetadata(type) {
  var metadata = Object.getOwnPropertyDescriptor(type, exports.metaSymbol);

  if (!metadata || !metadata.value) {
    Object.defineProperty(type, exports.metaSymbol, {
      enumerable: false,
      configurable: false,
      value: new MetadataType()
    });
  }

  return type[exports.metaSymbol];
}

exports.getMetadata = getMetadata;

function getInjects(type) {
  var injects = getMetadata(type).injects;
  var superType = Object.getPrototypeOf(type);

  if (superType) {
    return injects.concat(getInjects(superType));
  }

  return injects;
}

exports.getInjects = getInjects;