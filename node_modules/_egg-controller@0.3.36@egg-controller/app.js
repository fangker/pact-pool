"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const fs = require("fs");
const path = require("path");
const register_1 = require("./lib/register");
const util_1 = require("./lib/util");
exports.default = (app) => {
    const config = app.config.controller;
    if (config.autoLoad) {
        [].concat(config.ctrlDir)
            .map(dir => path.isAbsolute(dir) ? dir : path.join(app.baseDir, dir))
            .forEach(dir => fs.existsSync(dir) && util_1.loadDir(dir));
    }
    app.beforeStart(() => {
        register_1.registerRoute(app);
    });
};
